<script type="text/javascript">
require(['jquery', 'oro/locale-settings'],
function($, localeSettings) {
    {% set dateTimeFormats = {} %}
    {% for formatterName in oro_datetime_formatter_list() %}
        {% set currentFormats = {
            'date': oro_date_format(formatterName),
            'time': oro_time_format(formatterName),
            'datetime': oro_datetime_format(formatterName),
        } %}
        {% set dateTimeFormats = dateTimeFormats|merge({ (formatterName) : currentFormats }) %}
    {% endfor %}

    {% set settings = {
        'locale': oro_locale(),
        'language': oro_language(),
        'country': oro_country(),
        'currency': oro_currency(),
        'timezone': oro_timezone(),
        'timezone_offset': oro_timezone_offset(),
        'format_address_by_address_country': oro_format_address_by_address_country(),
        'format': {
            'datetime': dateTimeFormats
        },
		'calendar': {
            'dow': {
                'wide':        oro_calendar_day_of_week_names('wide'),
                'abbreviated': oro_calendar_day_of_week_names('abbreviated'),
                'short':       oro_calendar_day_of_week_names('short'),
                'narrow':      oro_calendar_day_of_week_names('narrow'),
            },
            'months': {
                'wide':        oro_calendar_month_names('wide'),
                'abbreviated': oro_calendar_month_names('abbreviated'),
                'narrow':      oro_calendar_month_names('narrow'),
            },
            'first_dow': oro_calendar_first_day_of_week()
        }
    } %}

    var settings = {{ settings|json_encode|raw }};

	// Convert to js representation as an array with first index 0
    settings.calendar.first_dow          = settings.calendar.first_day_of_week - 1;

    settings.calendar.dow.wide           = $.map(settings.calendar.dow.wide, function(v) {return v});
    settings.calendar.dow.abbreviated    = $.map(settings.calendar.dow.abbreviated, function(v) {return v});
    settings.calendar.dow.short          = $.map(settings.calendar.dow.short, function(v) {return v});
    settings.calendar.dow.narrow         = $.map(settings.calendar.dow.narrow, function(v) {return v});

    settings.calendar.months.wide        = $.map(settings.calendar.months.wide, function(v) {return v});
    settings.calendar.months.abbreviated = $.map(settings.calendar.months.abbreviated, function(v) {return v});
    settings.calendar.months.narrow      = $.map(settings.calendar.months.narrow, function(v) {return v});
    localeSettings.extendSettings(settings);
});
</script>
